{"version":3,"file":"whoami-xBAWvzG4.js","names":["apiService: SentryApiService"],"sources":["../src/agent-tools/whoami.ts"],"sourcesContent":["import { tool } from \"ai\";\nimport { z } from \"zod\";\nimport type { SentryApiService } from \"../api-client\";\n\nexport interface WhoamiResult {\n  id: string | number;\n  name: string | null;\n  email: string;\n}\n\n/**\n * Get the current authenticated user's information from Sentry API\n */\nexport async function getCurrentUser(\n  apiService: SentryApiService,\n): Promise<WhoamiResult> {\n  const user = await apiService.getAuthenticatedUser();\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n  };\n}\n\n/**\n * Create a tool for getting current user information\n */\nexport function createWhoamiTool(apiService: SentryApiService) {\n  return tool({\n    description: \"Get the current authenticated user's information\",\n    parameters: z.object({}),\n    execute: async () => {\n      const user = await getCurrentUser(apiService);\n      return `Current user: ${user.name || \"Unknown\"} (${user.email}, ID: ${user.id})`;\n    },\n  });\n}\n"],"mappings":";;;;;;;AAaA,eAAsB,eACpBA,YACuB;CACvB,MAAM,OAAO,MAAM,WAAW,sBAAsB;AACpD,QAAO;EACL,IAAI,KAAK;EACT,MAAM,KAAK;EACX,OAAO,KAAK;CACb;AACF;;;;AAKD,SAAgB,iBAAiBA,YAA8B;AAC7D,QAAO,KAAK;EACV,aAAa;EACb,YAAY,EAAE,OAAO,CAAE,EAAC;EACxB,SAAS,YAAY;GACnB,MAAM,OAAO,MAAM,eAAe,WAAW;AAC7C,WAAQ,gBAAgB,KAAK,QAAQ,UAAU,IAAI,KAAK,MAAM,QAAQ,KAAK,GAAG;EAC/E;CACF,EAAC;AACH"}