{"version":3,"file":"find-projects-Dh-1AK-m.cjs","names":["ParamOrganizationSlug","context: ServerContext","UserInputError"],"sources":["../src/tools/find-projects.ts"],"sourcesContent":["import { z } from \"zod\";\nimport { setTag } from \"@sentry/core\";\nimport { defineTool } from \"./utils/defineTool\";\nimport { apiServiceFromContext } from \"./utils/api-utils\";\nimport { UserInputError } from \"../errors\";\nimport type { ServerContext } from \"../types\";\nimport { ParamOrganizationSlug, ParamRegionUrl } from \"../schema\";\n\nexport default defineTool({\n  name: \"find_projects\",\n  description: [\n    \"Find projects in Sentry.\",\n    \"\",\n    \"Use this tool when you need to:\",\n    \"- View all projects in a Sentry organization\",\n    \"- Find a project's slug to aid other tool requests\",\n  ].join(\"\\n\"),\n  inputSchema: {\n    organizationSlug: ParamOrganizationSlug,\n    regionUrl: ParamRegionUrl.optional(),\n  },\n  async handler(params, context: ServerContext) {\n    const apiService = apiServiceFromContext(context, {\n      regionUrl: params.regionUrl,\n    });\n    const organizationSlug = params.organizationSlug;\n\n    if (!organizationSlug) {\n      throw new UserInputError(\n        \"Organization slug is required. Please provide an organizationSlug parameter.\",\n      );\n    }\n\n    setTag(\"organization.slug\", organizationSlug);\n\n    const projects = await apiService.listProjects(organizationSlug);\n    let output = `# Projects in **${organizationSlug}**\\n\\n`;\n    if (projects.length === 0) {\n      output += \"No projects found.\\n\";\n      return output;\n    }\n    output += projects.map((project) => `- **${project.slug}**\\n`).join(\"\");\n    return output;\n  },\n});\n"],"mappings":";;;;;;;;AAQA,4BAAe,8BAAW;CACxB,MAAM;CACN,aAAa;EACX;EACA;EACA;EACA;EACA;CACD,EAAC,KAAK,KAAK;CACZ,aAAa;EACX,kBAAkBA;EAClB,WAAW,8BAAe,UAAU;CACrC;CACD,MAAM,QAAQ,QAAQC,SAAwB;EAC5C,MAAM,aAAa,wCAAsB,SAAS,EAChD,WAAW,OAAO,UACnB,EAAC;EACF,MAAM,mBAAmB,OAAO;AAEhC,OAAK,iBACH,OAAM,IAAIC,8BACR;AAIJ,4BAAO,qBAAqB,iBAAiB;EAE7C,MAAM,WAAW,MAAM,WAAW,aAAa,iBAAiB;EAChE,IAAI,UAAU,kBAAkB,iBAAiB;AACjD,MAAI,SAAS,WAAW,GAAG;AACzB,aAAU;AACV,UAAO;EACR;AACD,YAAU,SAAS,IAAI,CAAC,aAAa,MAAM,QAAQ,KAAK,MAAM,CAAC,KAAK,GAAG;AACvE,SAAO;CACR;AACF,EAAC"}